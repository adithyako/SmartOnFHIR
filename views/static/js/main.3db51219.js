/*! For license information please see main.3db51219.js.LICENSE.txt */
(()=>{var e={1604:(e,t,r)=>{var n,o;void 0===(o="function"===typeof(n=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function l(e){var t=a();return function(){var r,n=i(e);if(t){var o=i(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}function p(){return p="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=f(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},p.apply(this,arguments)}var h=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(e,t,r){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:r})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0,o=r.length;n<o;n++)if(r[n].callback===t)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),r=0,n=t.length;r<n;r++){var o=t[r];try{o.callback.call(this,e)}catch(i){Promise.resolve().then((function(){throw i}))}o.options&&o.options.once&&this.removeEventListener(e.type,o.callback)}return!e.defaultPrevented}}}]),t}(),d=function(t){o(s,t);var r=l(s);function s(){var t;return e(this,s),(t=r.call(this)).listeners||h.call(c(t)),Object.defineProperty(c(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(c(t),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(c(t),"reason",{value:void 0,writable:!0,configurable:!0}),t}return n(s,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"===typeof this.onabort&&this.onabort.call(this,e)),p(i(s.prototype),"dispatchEvent",this).call(this,e)}}]),s}(h),y=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new d,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(e){var t;try{t=new Event("abort")}catch(n){"undefined"!==typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}var r=e;if(void 0===r)if("undefined"===typeof document)(r=new Error("This operation was aborted")).name="AbortError";else try{r=new DOMException("signal is aborted without reason")}catch(o){(r=new Error("This operation was aborted")).name="AbortError"}this.signal.reason=r,this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();function g(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"===typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}"undefined"!==typeof Symbol&&Symbol.toStringTag&&(y.prototype[Symbol.toStringTag]="AbortController",d.prototype[Symbol.toStringTag]="AbortSignal"),function(e){g(e)&&(e.AbortController=y,e.AbortSignal=d)}("undefined"!==typeof self?self:r.g)})?n.call(t,r,t,e):n)||(e.exports=o)},9038:function(e,t){var r="undefined"!==typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,o="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!==typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&o&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=d(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=u(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[u(e)]},p.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},p.prototype.set=function(e,t){this.map[u(e)]=l(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){var r=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=function(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function A(e){var t=new p;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t}function S(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},b.call(v.prototype),b.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var C=[301,302,303,307,308];S.redirect=function(e,t){if(-1===C.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(O){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function E(e,r){return new Promise((function(n,i){var s=new v(e,r);if(s.signal&&s.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:A(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new S(t,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&o&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send("undefined"===typeof s._bodyInit?null:s._bodyInit)}))}E.polyfill=!0,e.fetch||(e.fetch=E,e.Headers=p,e.Request=v,e.Response=S),t.Headers=p,t.Request=v,t.Response=S,t.fetch=E,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=n;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t},6522:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(r){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(5237)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},5237:(e,t,r)=>{e.exports=function(e){function t(e){let r,o,i,s=null;function a(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(!a.enabled)return;const i=a,s=Number(new Date),c=s-(r||s);i.diff=c,i.prev=r,i.curr=s,r=s,n[0]=t.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");let u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,((e,r)=>{if("%%"===e)return"%";u++;const o=t.formatters[r];if("function"===typeof o){const t=n[u];e=o.call(i,t),n.splice(u,1),u--}return e})),t.formatArgs.call(i,n);(i.log||t.log).apply(i,n)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{s=e}}),"function"===typeof t.init&&t.init(a),a}function n(e,r){const n=t(this.namespace+("undefined"===typeof r?":":r)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"===typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7340),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},8639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8785),o=r(4352),i=r(1149),{Response:s}="undefined"!==typeof FHIRCLIENT_PURE?window:r(9038),a=n.debug.extend("client");function c(e,t,r,o,i,s){const a=(0,n.getPath)(e,t);if(a){const c=Array.isArray(a);return Promise.all((0,n.makeArray)(a).filter(Boolean).map(((a,u)=>{const l=a.reference;if(l)return function(e,t,r,n){return t[e]||(t[e]=r.request({url:e,signal:n}).then((r=>(t[e]=r,r)),(r=>{throw delete t[e],r}))),Promise.resolve(t[e])}(l,o,i,s).then((o=>{r&&(c?t.indexOf("..")>-1?(0,n.setPath)(e,"".concat(t.replace("..",".".concat(u,"."))),o):(0,n.setPath)(e,"".concat(t,".").concat(u),o):(0,n.setPath)(e,t,o))})).catch((e=>{if(404!==e.status)throw e}))})))}}function u(e,t,r,o,i){let s=(0,n.makeArray)(t.resolveReferences).filter(Boolean).map((e=>String(e).trim())).filter(Boolean);if(s=s.filter(((e,t)=>!(s.indexOf(e,t+1)>-1)||(a('Duplicated reference path "%s"',e),!1))),!s.length)return Promise.resolve();const u={};s.forEach((e=>{const t=e.split(".").length;u[t]||(u[t]=[]),u[t].push(e)}));let l=Promise.resolve();return Object.keys(u).sort().forEach((n=>{const s=u[n];l=l.then((()=>Promise.all(s.map((n=>c(e,n,!!t.graph,r,o,i))))))})),l}t.default=class{constructor(e,t){var r=this;this.units=n.units;const o="string"==typeof t?{serverUrl:t}:t;(0,n.assert)(o.serverUrl&&o.serverUrl.match(/https?:\/\/.+/),'A "serverUrl" option is required and must begin with "http(s)"'),this.state=o,this.environment=e,this._refreshTask=null;const s=this;this.patient={get id(){return s.getPatientId()},read:e=>{const t=this.patient.id;return t?this.request(Object.assign(Object.assign({},e),{url:"Patient/".concat(t)})):Promise.reject(new Error("Patient is not available"))},request:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.patient.id?(async()=>{const o=await async function(e,t){const r=(0,n.absolute)("/",t.state.serverUrl);async function o(e){const r=e.pathname.split("/").pop();(0,n.assert)(r,'Invalid url "'.concat(e,'"')),(0,n.assert)(i.patientCompartment.indexOf(r)>-1,'Cannot filter "'.concat(r,'" resources by patient'));const o=await(0,n.fetchConformanceStatement)(t.state.serverUrl),s=(0,n.getPatientParam)(o,r);return e.searchParams.set(s,t.patient.id),e.href}return"string"==typeof e||e instanceof URL?{url:await o(new URL(e+"",r))}:(e.url=await o(new URL(e.url+"",r)),e)}(e,r);return r.request(o,t)})():Promise.reject(new Error("Patient is not available"))}},this.encounter={get id(){return s.getEncounterId()},read:e=>{const t=this.encounter.id;return t?this.request(Object.assign(Object.assign({},e),{url:"Encounter/".concat(t)})):Promise.reject(new Error("Encounter is not available"))}},this.user={get fhirUser(){return s.getFhirUser()},get id(){return s.getUserId()},get resourceType(){return s.getUserType()},read:e=>{const t=this.user.fhirUser;return t?this.request(Object.assign(Object.assign({},e),{url:t})):Promise.reject(new Error("User is not available"))}},this.connect(e.fhir)}connect(e){if("function"==typeof e){const t={baseUrl:this.state.serverUrl.replace(/\/$/,"")},r=this.getState("tokenResponse.access_token");if(r)t.auth={token:r};else{const{username:e,password:r}=this.state;e&&r&&(t.auth={user:e,pass:r})}this.api=e(t);const n=this.getState("tokenResponse.patient");n&&(this.patient.api=e(Object.assign(Object.assign({},t),{patient:n})))}return this}getPatientId(){const e=this.state.tokenResponse;return e?e.patient?e.patient:((this.state.scope||"").match(/\blaunch(\/patient)?\b/)?a("The ID of the selected patient is not available. Please check if your server supports that."):a(o.default.noScopeForId,"patient","patient"),null):(this.state.authorizeUri?a(o.default.noIfNoAuth,"the ID of the selected patient"):a(o.default.noFreeContext,"selected patient"),null)}getEncounterId(){const e=this.state.tokenResponse;return e?e.encounter?e.encounter:((this.state.scope||"").match(/\blaunch(\/encounter)?\b/)?a("The ID of the selected encounter is not available. Please check if your server supports that, and that the selected patient has any recorded encounters."):a(o.default.noScopeForId,"encounter","encounter"),null):(this.state.authorizeUri?a(o.default.noIfNoAuth,"the ID of the selected encounter"):a(o.default.noFreeContext,"selected encounter"),null)}getIdToken(){const e=this.state.tokenResponse;if(e){const t=e.id_token,r=this.state.scope||"";if(!t){const e=r.match(/\bopenid\b/),t=r.match(/\bprofile\b/),n=r.match(/\bfhirUser\b/);return a(e&&(n||t)?"The id_token is not available. Please check if your server supports that.":"You are trying to get the id_token but you are not using the right scopes. Please add 'openid' and 'fhirUser' or 'profile' to the scopes you are requesting."),null}return(0,n.jwtDecode)(t,this.environment)}return this.state.authorizeUri?a(o.default.noIfNoAuth,"the id_token"):a(o.default.noFreeContext,"id_token"),null}getFhirUser(){const e=this.getIdToken();return e?e.fhirUser?e.fhirUser.split("/").slice(-2).join("/"):e.profile:null}getUserId(){const e=this.getFhirUser();return e?e.split("/")[1]:null}getUserType(){const e=this.getFhirUser();return e?e.split("/")[0]:null}getAuthorizationHeader(){const e=this.getState("tokenResponse.access_token");if(e)return"Bearer "+e;const{username:t,password:r}=this.state;return t&&r?"Basic "+this.environment.btoa(t+":"+r):null}async _clearState(){const e=this.environment.getStorage(),t=await e.get(i.SMART_KEY);t&&await e.unset(t),await e.unset(i.SMART_KEY),this.state.tokenResponse={}}create(e,t){return this.request(Object.assign(Object.assign({},t),{url:"".concat(e.resourceType),method:"POST",body:JSON.stringify(e),headers:Object.assign({"content-type":"application/json"},(t||{}).headers)}))}update(e,t){return this.request(Object.assign(Object.assign({},t),{url:"".concat(e.resourceType,"/").concat(e.id),method:"PUT",body:JSON.stringify(e),headers:Object.assign({"content-type":"application/json"},(t||{}).headers)}))}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(Object.assign(Object.assign({},t),{url:e,method:"DELETE"}))}async patch(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,n.assertJsonPatch)(t),this.request(Object.assign(Object.assign({},r),{url:e,method:"PATCH",body:JSON.stringify(t),headers:Object.assign({prefer:"return=presentation","content-type":"application/json-patch+json; charset=UTF-8"},r.headers)}))}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;const a=n.debug.extend("client:request");let c;(0,n.assert)(e,"request requires an url or request options as argument"),"string"==typeof e||e instanceof URL?(c=String(e),e={}):c=String(e.url),c=(0,n.absolute)(c,this.state.serverUrl);const l={graph:!1!==t.graph,flat:!!t.flat,pageLimit:null!==(i=t.pageLimit)&&void 0!==i?i:1,resolveReferences:t.resolveReferences||[],useRefreshToken:!1!==t.useRefreshToken,onPage:"function"==typeof t.onPage?t.onPage:void 0},f=e.signal||void 0;let p;return(l.useRefreshToken?this.refreshIfNeeded({signal:f}).then((()=>e)):Promise.resolve(e)).then((e=>{const t=this.getAuthorizationHeader();return t&&(e.headers=Object.assign(Object.assign({},e.headers),{authorization:t})),e})).then((e=>(a("%s, options: %O, fhirOptions: %O",c,e,l),(0,n.request)(c,e).then((t=>e.includeResponse?(p=t.response,t.body):t))))).catch((async e=>{if(401==e.status){if(!this.getState("tokenResponse.access_token"))throw e.message+="\nThis app cannot be accessed directly. Please launch it as SMART app!",e;if(!l.useRefreshToken)throw a("Your session has expired and the useRefreshToken option is set to false. Please re-launch the app."),await this._clearState(),e.message+="\n"+o.default.expired,e;throw a("Auto-refresh failed! Please re-launch the app."),await this._clearState(),e.message+="\n"+o.default.expired,e}throw e})).catch((e=>{throw 403==e.status&&a("Permission denied! Please make sure that you have requested the proper scopes."),e})).then((t=>t?"string"==typeof t||t instanceof s?t:(async e=>("Bundle"==e.resourceType?await Promise.all((e.entry||[]).map((e=>u(e.resource,l,r,this,f)))):await u(e,l,r,this,f),e))(t).then((async e=>{if(e&&"Bundle"==e.resourceType){const t=e.link||[];if(l.flat&&(e=(e.entry||[]).map((e=>e.resource))),l.onPage&&await l.onPage(e,Object.assign({},r)),--l.pageLimit){const o=t.find((e=>"next"==e.relation));if(e=(0,n.makeArray)(e),o&&o.url){const t=await this.request({url:o.url,signal:f},l,r);return l.onPage?null:l.resolveReferences.length?(Object.assign(r,t.references),e.concat((0,n.makeArray)(t.data||t))):e.concat((0,n.makeArray)(t))}}}return e})).then((e=>{if(l.graph)r={};else if(!l.onPage&&l.resolveReferences.length)return{data:e,references:r};return e})).then((t=>e.includeResponse?{body:t,response:p}:t)):t))}refreshIfNeeded(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.getState("tokenResponse.access_token"),r=this.getState("tokenResponse.refresh_token"),n=this.state.expiresAt||0;return t&&r&&n-10<Date.now()/1e3?this.refresh(e):Promise.resolve(this.state)}refresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,r;const o=n.debug.extend("client:refresh");o("Attempting to refresh with refresh_token...");const i=null===(r=null===(t=this.state)||void 0===t?void 0:t.tokenResponse)||void 0===r?void 0:r.refresh_token;(0,n.assert)(i,"Unable to refresh. No refresh_token found.");const s=this.state.tokenUri;(0,n.assert)(s,"Unable to refresh. No tokenUri found.");const a=this.getState("tokenResponse.scope")||"",c=a.search(/\boffline_access\b/)>-1,u=a.search(/\bonline_access\b/)>-1;if((0,n.assert)(c||u,"Unable to refresh. No offline_access or online_access scope found."),!this._refreshTask){const t=Object.assign(Object.assign({credentials:this.environment.options.refreshTokenWithCredentials||"same-origin"},e),{method:"POST",mode:"cors",headers:Object.assign(Object.assign({},e.headers||{}),{"content-type":"application/x-www-form-urlencoded"}),body:"grant_type=refresh_token&refresh_token=".concat(encodeURIComponent(i))});if(!("authorization"in t.headers)){const{clientSecret:e,clientId:r}=this.state;e&&(t.headers.authorization="Basic "+this.environment.btoa(r+":"+e))}this._refreshTask=(0,n.request)(s,t).then((e=>((0,n.assert)(e.access_token,"No access token received"),o("Received new access token response %O",e),this.state.tokenResponse=Object.assign(Object.assign({},this.state.tokenResponse),e),this.state.expiresAt=(0,n.getAccessTokenExpiration)(e,this.environment),this.state))).catch((e=>{var t,r;throw(null===(r=null===(t=this.state)||void 0===t?void 0:t.tokenResponse)||void 0===r?void 0:r.refresh_token)&&(o("Deleting the expired or invalid refresh token."),delete this.state.tokenResponse.refresh_token),e})).finally((()=>{this._refreshTask=null;const e=this.state.key;e?this.environment.getStorage().set(e,this.state):o("No 'key' found in Clint.state. Cannot persist the instance.")}))}return this._refreshTask}byCode(e,t){return(0,n.byCode)(e,t)}byCodes(e,t){return(0,n.byCodes)(e,t)}getPath(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,n.getPath)(e,t)}getState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,n.getPath)(Object.assign({},this.state),e)}getFhirVersion(){return(0,n.fetchConformanceStatement)(this.state.serverUrl).then((e=>e.fhirVersion))}getFhirRelease(){return this.getFhirVersion().then((e=>{var t;return null!==(t=i.fhirVersions[e])&&void 0!==t?t:0}))}}},2004:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super("".concat(e.status," ").concat(e.statusText,"\nURL: ").concat(e.url)),this.name="HttpError",this.response=e,this.statusCode=e.status,this.status=e.status,this.statusText=e.statusText}async parse(){if(!this.response.bodyUsed)try{const e=this.response.headers.get("content-type")||"text/plain";if(e.match(/\bjson\b/i)){let e=await this.response.json();e.error?(this.message+="\n"+e.error,e.error_description&&(this.message+=": "+e.error_description)):this.message+="\n\n"+JSON.stringify(e,null,4)}else if(e.match(/^text\//i)){let e=await this.response.text();e&&(this.message+="\n\n"+e)}}catch(e){}return this}toJSON(){return{name:this.name,statusCode:this.statusCode,status:this.status,statusText:this.statusText,message:this.message}}}t.default=r},3572:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2247),o=r(8639),i=r(391),s=r(4281),a=r(2334);t.default=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._url=null,this._storage=null,this.security=s,this.options=Object.assign({replaceBrowserHistory:!0,fullSessionStorageSupport:!0,refreshTokenWithCredentials:"same-origin"},e)}relative(e){return new URL(e,this.getUrl().href).href}get fhir(){return"function"===typeof fhir?fhir:null}getUrl(){return this._url||(this._url=new URL(location+"")),this._url}redirect(e){location.href=e}getStorage(){return this._storage||(this._storage=new i.default),this._storage}getAbortController(){return AbortController}atob(e){return window.atob(e)}btoa(e){return window.btoa(e)}base64urlencode(e){return"string"==typeof e?(0,a.encodeURL)(e):(0,a.fromUint8Array)(e,!0)}base64urldecode(e){return(0,a.decode)(e)}getSmartApi(){var e=this;return{ready:function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(0,n.ready)(e,...r)},authorize:e=>(0,n.authorize)(this,e),init:e=>(0,n.init)(this,e),client:e=>new o.default(this,e),options:this.options,utils:{security:s}}}}},9297:(e,t,r)=>{"use strict";const n=new(r(3572).default),{ready:o,authorize:i,init:s,client:a,options:c,utils:u}=n.getSmartApi();if("undefined"==typeof FHIRCLIENT_PURE){const e=r(9038);r(1604),window.fetch||(window.fetch=e.default,window.Headers=e.Headers,window.Request=e.Request,window.Response=e.Response)}const l={AbortController:window.AbortController,client:a,utils:u,oauth2:{settings:c,ready:o,authorize:i,init:s}};e.exports=l},8785:(e,t,r)=>{"use strict";var n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.assertJsonPatch=t.assert=t.getTargetWindow=t.getPatientParam=t.byCodes=t.byCode=t.getAccessTokenExpiration=t.getTimeInFuture=t.jwtDecode=t.randomString=t.absolute=t.makeArray=t.setPath=t.getPath=t.fetchConformanceStatement=t.getAndCache=t.request=t.loweCaseKeys=t.responseToJSON=t.checkResponse=t.units=t.debug=void 0;const o=r(2004),i=r(1149),s=r(6522),{fetch:a}="undefined"!==typeof FHIRCLIENT_PURE?window:r(9038),c=s("FHIR");t.debug=c;const u={};function l(e){let{value:t,code:r}=e;if("number"!==typeof t)throw new Error("Found a non-numerical unit: "+t+" "+r)}async function f(e){if(!e.ok){const t=new o.default(e);throw await t.parse(),t}return e}function p(e){return e.text().then((e=>e.length?JSON.parse(e):""))}function h(e){if(!e)return e;if(Array.isArray(e))return e.map((e=>e&&"object"===typeof e?h(e):e));let t={};return Object.keys(e).forEach((r=>{const n=r.toLowerCase(),o=e[r];t[n]=o&&"object"==typeof o?h(o):o})),t}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeResponse:r}=t,o=n(t,["includeResponse"]);return a(e,Object.assign(Object.assign({mode:"cors"},o),{headers:Object.assign({accept:"application/json"},h(o.headers))})).then(f).then((e=>{const t=e.headers.get("content-type")+"";return t.match(/\bjson\b/i)?p(e).then((t=>({res:e,body:t}))):t.match(/^text\//i)?e.text().then((t=>({res:e,body:t}))):{res:e}})).then((e=>{let{res:t,body:n}=e;if(!n&&201==t.status){const e=t.headers.get("location");if(e)return d(e,Object.assign(Object.assign({},o),{method:"GET",body:null,includeResponse:r}))}return r?{body:n,response:t}:void 0===n?t:n}))}function y(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||!u[e]?(u[e]=d(e,t),u[e]):Promise.resolve(u[e])}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t=t.trim(),!t)return e;let r=t.split("."),n=e;for(;n&&r.length;){const e=r.shift();if(!e&&Array.isArray(n))return n.map((e=>g(e,r.join("."))));n=n[e]}return n}function b(e){return Array.isArray(e)?e:[e]}function m(e,t){const r=e.split(".")[1];return r?JSON.parse(t.atob(r)):null}function v(e,t){const r={};function n(e,t){e&&Array.isArray(e.coding)&&e.coding.forEach((e=>{let{code:n}=e;n&&(r[n]=r[n]||[],r[n].push(t))}))}return b(e).forEach((e=>{"Observation"===e.resourceType&&e[t]&&(Array.isArray(e[t])?e[t].forEach((t=>n(t,e))):n(e[t],e))})),r}function w(e,t){if(!e)throw new Error(t)}t.units={cm(e){let{code:t,value:r}=e;if(l({code:t,value:r}),"cm"==t)return r;if("m"==t)return 100*r;if("in"==t)return 2.54*r;if("[in_us]"==t)return 2.54*r;if("[in_i]"==t)return 2.54*r;if("ft"==t)return 30.48*r;if("[ft_us]"==t)return 30.48*r;throw new Error("Unrecognized length unit: "+t)},kg(e){let{code:t,value:r}=e;if(l({code:t,value:r}),"kg"==t)return r;if("g"==t)return r/1e3;if(t.match(/lb/))return r/2.20462;if(t.match(/oz/))return r/35.274;throw new Error("Unrecognized weight unit: "+t)},any:e=>(l(e),e.value)},t.checkResponse=f,t.responseToJSON=p,t.loweCaseKeys=h,t.request=d,t.getAndCache=y,t.fetchConformanceStatement=function(){let e=arguments.length>1?arguments[1]:void 0;const t=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/").replace(/\/*$/,"/")+"metadata";return y(t,e).catch((e=>{throw new Error('Failed to fetch the conformance statement from "'.concat(t,'". ').concat(e))}))},t.getPath=g,t.setPath=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.trim().split(".").reduce(((e,t,o,i)=>{if(!e||o!==i.length-1)return e&&void 0===e[t]&&n&&(e[t]=i[o+1].match(/^[0-9]+$/)?[]:{}),e?e[t]:void 0;e[t]=r}),e),e},t.makeArray=b,t.absolute=function(e,t){return e.match(/^http/)||e.match(/^urn/)?e:String(t||"").replace(/\/+$/,"")+"/"+e.replace(/^\/+/,"")},t.randomString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";const r=[],n=t.length;for(;e--;)r.push(t.charAt(Math.floor(Math.random()*n)));return r.join("")},t.jwtDecode=m,t.getTimeInFuture=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:120,t=arguments.length>1?arguments[1]:void 0;return Math.floor(+(t||new Date)/1e3+e)},t.getAccessTokenExpiration=function(e,t){const r=Math.floor(Date.now()/1e3);if(e.expires_in)return r+e.expires_in;if(e.access_token){let r=m(e.access_token,t);if(r&&r.exp)return r.exp}return r+300},t.byCode=v,t.byCodes=function(e,t){const r=v(e,t);return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>e+""in r)).reduce(((e,t)=>e.concat(r[t+""])),[])}},t.getPatientParam=function(e,t){const r=(g(e,"rest.0.resource")||[]).find((e=>e.type===t));if(!r)throw new Error('Resource "'.concat(t,'" is not supported by this FHIR server'));if(!Array.isArray(r.searchParam))throw new Error('No search parameters supported for "'.concat(t,'" on this FHIR server'));if("Patient"==t&&r.searchParam.find((e=>"_id"==e.name)))return"_id";const n=i.patientParams.find((e=>r.searchParam.find((t=>t.name==e))));if(!n)throw new Error("I don't know what param to use for "+t);return n},t.getTargetWindow=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:720;if("function"==typeof e&&(e=await e()),e&&"object"==typeof e)return e;if("string"!=typeof e)return c("Invalid target type '%s'. Failing back to '_self'.",typeof e),self;if("_self"==e)return self;if("_parent"==e)return parent;if("_top"==e)return top||self;if("_blank"==e){let e,t=null;try{if(t=window.open("","SMARTAuthPopup"),!t)throw new Error("Perhaps window.open was blocked")}catch(o){e=o}return t||(c("Cannot open window. Failing back to '_self'. %s",e),self)}if("popup"==e){let e,n=null;try{if(n=window.open("","SMARTAuthPopup",["height="+r,"width="+t,"menubar=0","resizable=1","status=0","top="+(screen.height-r)/2,"left="+(screen.width-t)/2].join(",")),!n)throw new Error("Perhaps the popup window was blocked")}catch(o){e=o}return n||(c("Cannot open window. Failing back to '_self'. %s",e),self)}const n=frames[e];return n||(c("Unknown target '%s'. Failing back to '_self'.",e),self)},t.assert=w,t.assertJsonPatch=function(e){w(Array.isArray(e),"The JSON patch must be an array"),w(e.length>0,"The JSON patch array should not be empty"),e.forEach((e=>{w(["add","replace","test","move","copy","remove"].indexOf(e.op)>-1,'Each patch operation must have an "op" property which must be one of: "add", "replace", "test", "move", "copy", "remove"'),w(e.path&&typeof e.path,'Invalid "'.concat(e.op,'" operation. Missing "path" property')),"add"==e.op||"replace"==e.op||"test"==e.op?(w("value"in e,'Invalid "'.concat(e.op,'" operation. Missing "value" property')),w(3==Object.keys(e).length,'Invalid "'.concat(e.op,'" operation. Contains unknown properties'))):"move"==e.op||"copy"==e.op?(w("string"==typeof e.from,'Invalid "'.concat(e.op,'" operation. Requires a string "from" property')),w(3==Object.keys(e).length,'Invalid "'.concat(e.op,'" operation. Contains unknown properties'))):w(2==Object.keys(e).length,'Invalid "'.concat(e.op,'" operation. Contains unknown properties'))}))}},4281:(e,t,r)=>{"use strict";r(7360),Object.defineProperty(t,"__esModule",{value:!0}),t.signCompactJws=t.importJWK=t.generatePKCEChallenge=t.digestSha256=t.randomBytes=void 0;const n=r(2334),o="object"===typeof globalThis&&globalThis.crypto?globalThis.crypto:r(1252).A,i=o.subtle,s={ES384:{name:"ECDSA",namedCurve:"P-384"},RS384:{name:"RSASSA-PKCS1-v1_5",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-384"}}};function a(e){return o.getRandomValues(new Uint8Array(e))}async function c(e){const t=(new TextEncoder).encode(e),r=await i.digest("SHA-256",t);return new Uint8Array(r)}t.randomBytes=a,t.digestSha256=c;t.generatePKCEChallenge=async function(){const e=a(arguments.length>0&&void 0!==arguments[0]?arguments[0]:96),t=(0,n.fromUint8Array)(e,!0);return{codeChallenge:(0,n.fromUint8Array)(await c(t),!0),codeVerifier:t}},t.importJWK=async function(e){if(!e.alg)throw new Error('The "alg" property of the JWK must be set to "ES384" or "RS384"');if(Array.isArray(e.key_ops)||(e.key_ops=["sign"]),!e.key_ops.includes("sign"))throw new Error('The "key_ops" property of the JWK does not contain "sign"');try{return await i.importKey("jwk",e,s[e.alg],!0===e.ext,e.key_ops)}catch(t){throw new Error("The ".concat(e.alg," is not supported by this browser: ").concat(t))}},t.signCompactJws=async function(e,t,r,o){const s=JSON.stringify(Object.assign(Object.assign({},r),{alg:e})),a=JSON.stringify(o),c="".concat((0,n.encodeURL)(s),".").concat((0,n.encodeURL)(a)),u=await i.sign(Object.assign(Object.assign({},t.algorithm),{hash:"SHA-384"}),t,(new TextEncoder).encode(c));return"".concat(c,".").concat((0,n.fromUint8Array)(new Uint8Array(u),!0))}},1149:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMART_KEY=t.patientParams=t.fhirVersions=t.patientCompartment=void 0,t.patientCompartment=["Account","AdverseEvent","AllergyIntolerance","Appointment","AppointmentResponse","AuditEvent","Basic","BodySite","BodyStructure","CarePlan","CareTeam","ChargeItem","Claim","ClaimResponse","ClinicalImpression","Communication","CommunicationRequest","Composition","Condition","Consent","Coverage","CoverageEligibilityRequest","CoverageEligibilityResponse","DetectedIssue","DeviceRequest","DeviceUseRequest","DeviceUseStatement","DiagnosticOrder","DiagnosticReport","DocumentManifest","DocumentReference","EligibilityRequest","Encounter","EnrollmentRequest","EpisodeOfCare","ExplanationOfBenefit","FamilyMemberHistory","Flag","Goal","Group","ImagingManifest","ImagingObjectSelection","ImagingStudy","Immunization","ImmunizationEvaluation","ImmunizationRecommendation","Invoice","List","MeasureReport","Media","MedicationAdministration","MedicationDispense","MedicationOrder","MedicationRequest","MedicationStatement","MolecularSequence","NutritionOrder","Observation","Order","Patient","Person","Procedure","ProcedureRequest","Provenance","QuestionnaireResponse","ReferralRequest","RelatedPerson","RequestGroup","ResearchSubject","RiskAssessment","Schedule","ServiceRequest","Specimen","SupplyDelivery","SupplyRequest","VisionPrescription"],t.fhirVersions={"0.4.0":2,"0.5.0":2,"1.0.0":2,"1.0.1":2,"1.0.2":2,"1.1.0":3,"1.4.0":3,"1.6.0":3,"1.8.0":3,"3.0.0":3,"3.0.1":3,"3.3.0":4,"3.5.0":4,"4.0.0":4,"4.0.1":4},t.patientParams=["patient","subject","requester","member","actor","beneficiary"],t.SMART_KEY="SMART_KEY"},2247:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.buildTokenRequest=t.ready=t.onMessage=t.isInPopUp=t.isInFrame=t.authorize=t.getSecurityExtensions=t.fetchWellKnownJson=t.KEY=void 0;const n=r(8785),o=r(8639),i=r(1149);Object.defineProperty(t,"KEY",{enumerable:!0,get:function(){return i.SMART_KEY}});const s=n.debug.extend("oauth2");function a(){return"object"===typeof window}function c(){let e=arguments.length>1?arguments[1]:void 0;const t=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/").replace(/\/*$/,"/")+".well-known/smart-configuration";return(0,n.getAndCache)(t,e).catch((e=>{throw new Error('Failed to fetch the well-known json "'.concat(t,'". ').concat(e.message))}))}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return function(){return c(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",arguments.length>1?arguments[1]:void 0).then((e=>{if(!e.authorization_endpoint||!e.token_endpoint)throw new Error("Invalid wellKnownJson");return{registrationUri:e.registration_endpoint||"",authorizeUri:e.authorization_endpoint,tokenUri:e.token_endpoint,codeChallengeMethods:e.code_challenge_methods_supported||[]}}))}(e).catch((()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1?arguments[1]:void 0;return(0,n.fetchConformanceStatement)(e,t).then((e=>{const t=((0,n.getPath)(e||{},"rest.0.security.extension")||[]).filter((e=>"http://fhir-registry.smarthealthit.org/StructureDefinition/oauth-uris"===e.url)).map((e=>e.extension))[0],r={registrationUri:"",authorizeUri:"",tokenUri:"",codeChallengeMethods:[]};return t&&t.forEach((e=>{"register"===e.url&&(r.registrationUri=e.valueUri),"authorize"===e.url&&(r.authorizeUri=e.valueUri),"token"===e.url&&(r.tokenUri=e.valueUri)})),r}))}(e)))}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.getUrl();if(Array.isArray(t)){const o=r.searchParams.get("iss")||r.searchParams.get("fhirServiceUrl");if(!o)throw new Error('Passing in an "iss" url parameter is required if authorize uses multiple configurations');const i=t.find((e=>{if(e.issMatch){if("function"===typeof e.issMatch)return!!e.issMatch(o);if("string"===typeof e.issMatch)return e.issMatch===o;if(e.issMatch instanceof RegExp)return e.issMatch.test(o)}return!1}));return(0,n.assert)(i,'No configuration found matching the current "iss" parameter "'.concat(o,'"')),await l(e,i)}const{clientSecret:o,fakeTokenResponse:c,encounterId:d,target:y,width:g,height:b,pkceMode:m,clientPublicKeySetUrl:v,redirect_uri:w,client_id:A}=t;let{iss:S,launch:C,patientId:E,fhirServiceUrl:O,redirectUri:k,noRedirect:P,scope:_="",clientId:R,completeInTarget:x,clientPrivateJwk:j}=t;const U=e.getStorage();S=r.searchParams.get("iss")||S,O=r.searchParams.get("fhirServiceUrl")||O,C=r.searchParams.get("launch")||C,E=r.searchParams.get("patientId")||E,R=r.searchParams.get("clientId")||R,R||(R=A),k||(k=w),k?k.match(/^https?\:\/\//)||(k=e.relative(k)):k=e.relative(".");const T=String(S||O||"");if(!T)throw new Error("No server url found. It must be specified as `iss` or as `fhirServiceUrl` parameter");if(S&&s("Making %s launch...",C?"EHR":"standalone"),C&&!_.match(/launch/)&&(_+=" launch"),a()){const e=f(),t=p();(e||t)&&!0!==x&&!1!==x&&(x=e,console.warn('Your app is being authorized from within an iframe or popup window. Please be explicit and provide a "completeInTarget" option. Use "true" to complete the authorization in the same window, or "false" to try to complete it in the parent or the opener window. See http://docs.smarthealthit.org/client-js/api.html'))}const F=await U.get(i.SMART_KEY);await U.unset(F);const I=(0,n.randomString)(16),M={clientId:R,scope:_,redirectUri:k,serverUrl:T,clientSecret:o,clientPrivateJwk:j,tokenResponse:{},key:I,completeInTarget:x,clientPublicKeySetUrl:v};(!a()||(0,n.getPath)(e,"options.fullSessionStorageSupport"))&&await U.set(i.SMART_KEY,I),c&&Object.assign(M.tokenResponse,c),E&&Object.assign(M.tokenResponse,{patient:E}),d&&Object.assign(M.tokenResponse,{encounter:d});let K=k+"?state="+encodeURIComponent(I);if(O&&!S)return s("Making fake launch..."),await U.set(I,M),P?K:await e.redirect(K);const B=await u(T);if(Object.assign(M,B),await U.set(I,M),!M.authorizeUri)return P?K:await e.redirect(K);const L=["response_type=code","client_id="+encodeURIComponent(R||""),"scope="+encodeURIComponent(_),"redirect_uri="+encodeURIComponent(k),"aud="+encodeURIComponent(T),"state="+encodeURIComponent(I)];if(C&&L.push("launch="+encodeURIComponent(C)),function(e,t){if("disabled"===t)return!1;if("unsafeV1"===t)return!0;if("required"===t){if(!e)throw new Error("Required PKCE code challenge method (`S256`) was not found.");return!0}return e}(B.codeChallengeMethods.includes("S256"),m)){let t=await e.security.generatePKCEChallenge();Object.assign(M,t),await U.set(I,M),L.push("code_challenge="+M.codeChallenge),L.push("code_challenge_method=S256")}if(K=M.authorizeUri+"?"+L.join("&"),P)return K;if(!y||!a())return await e.redirect(K);{let e;if(e=await(0,n.getTargetWindow)(y,g,b),e!==self)try{e.sessionStorage.removeItem(F),e.sessionStorage.setItem(I,JSON.stringify(M))}catch(D){(0,n.debug)('Failed to modify window.sessionStorage. Perhaps it is from different origin?. Failing back to "_self". %s',D),e=self}if(e!==self)try{e.location.href=K,self.addEventListener("message",h)}catch(D){(0,n.debug)('Failed to modify window.location. Perhaps it is from different origin?. Failing back to "_self". %s',D),self.location.href=K}else self.location.href=K}}function f(){try{return self!==top&&parent!==self}catch(e){return!0}}function p(){try{return self===top&&!!opener&&opener!==self&&!!window.name}catch(e){return!1}}function h(e){"completeAuth"==e.data.type&&e.origin===new URL(self.location.href).origin&&(window.removeEventListener("message",h),window.location.href=e.data.url)}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,c;const u=e.getUrl(),l=e.getStorage(),h=u.searchParams;let d=h.get("state");const g=h.get("code"),b=h.get("error"),m=h.get("error_description");if(d||(d=await l.get(i.SMART_KEY)),b||m)throw new Error([b,m].filter(Boolean).join(": "));s("key: %s, code: %s",d,g),(0,n.assert)(d,"No 'state' parameter found. Please (re)launch the app.");let v=await l.get(d);const w=!a()||(0,n.getPath)(e,"options.fullSessionStorageSupport");if(a()&&v&&!v.completeInTarget){const e=f(),t=p();if((e||t)&&!u.searchParams.get("complete")){u.searchParams.set("complete","1");const{href:r,origin:n}=u;return e&&parent.postMessage({type:"completeAuth",url:r},n),t&&(opener.postMessage({type:"completeAuth",url:r},n),window.close()),new Promise((()=>{}))}}u.searchParams.delete("complete");const A=h.has("state");a()&&(0,n.getPath)(e,"options.replaceBrowserHistory")&&(g||A)&&(g&&(h.delete("code"),s("Removed code parameter from the url.")),A&&w&&(h.delete("state"),s("Removed state parameter from the url.")),window.history.replaceState&&window.history.replaceState({},"",u.href)),(0,n.assert)(v,"No state found! Please (re)launch the app.");if(!(!g||(null===(r=v.tokenResponse)||void 0===r?void 0:r.access_token))&&v.tokenUri){(0,n.assert)(g,"'code' url parameter is required"),s("Preparing to exchange the code for access token...");const r=await y(e,{code:g,state:v,clientPublicKeySetUrl:t.clientPublicKeySetUrl,privateKey:t.privateKey||v.clientPrivateJwk});s("Token request options: %O",r);const o=await(0,n.request)(v.tokenUri,r);s("Token response: %O",o),(0,n.assert)(o.access_token,"Failed to obtain access token."),v.expiresAt=(0,n.getAccessTokenExpiration)(o,e),v=Object.assign(Object.assign({},v),{tokenResponse:o}),await l.set(d,v),s("Authorization successful!")}else s((null===(c=v.tokenResponse)||void 0===c?void 0:c.access_token)?"Already authorized":"No authorization needed");w&&await l.set(i.SMART_KEY,d);const S=new o.default(e,v);return s("Created client instance: %O",S),S}async function y(e,t){let{code:r,state:o,clientPublicKeySetUrl:i,privateKey:a}=t;const{redirectUri:c,clientSecret:u,tokenUri:l,clientId:f,codeVerifier:p}=o;(0,n.assert)(c,"Missing state.redirectUri"),(0,n.assert)(l,"Missing state.tokenUri"),(0,n.assert)(f,"Missing state.clientId");const h={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:"code=".concat(r,"&grant_type=authorization_code&redirect_uri=").concat(encodeURIComponent(c))};if(u)h.headers.authorization="Basic "+e.btoa(f+":"+u),s("Using state.clientSecret to construct the authorization header: %s",h.headers.authorization);else if(a){const t="key"in a?a.key:await e.security.importJWK(a),r={typ:"JWT",kid:a.kid,jku:i||o.clientPublicKeySetUrl},c={iss:f,sub:f,aud:l,jti:e.base64urlencode(e.security.randomBytes(32)),exp:(0,n.getTimeInFuture)(120)},u=await e.security.signCompactJws(a.alg,t,r,c);h.body+="&client_assertion_type=".concat(encodeURIComponent("urn:ietf:params:oauth:client-assertion-type:jwt-bearer")),h.body+="&client_assertion=".concat(encodeURIComponent(u)),s("Using state.clientPrivateJwk to add a client_assertion to the POST body")}else s("Public client detected; adding state.clientId to the POST body"),h.body+="&client_id=".concat(encodeURIComponent(f));return p&&(s("Found state.codeVerifier, adding to the POST body"),h.body+="&code_verifier="+p),h}t.fetchWellKnownJson=c,t.getSecurityExtensions=u,t.authorize=l,t.isInFrame=f,t.isInPopUp=p,t.onMessage=h,t.ready=d,t.buildTokenRequest=y,t.init=async function(e,t,r){const n=e.getUrl(),s=n.searchParams.get("code"),a=n.searchParams.get("state");if(s&&a)return d(e,r);const c=e.getStorage(),u=a||await c.get(i.SMART_KEY),f=await c.get(u);return f?new o.default(e,f):l(e,t).then((()=>new Promise((()=>{}))))}},391:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{async get(e){const t=sessionStorage[e];return t?JSON.parse(t):null}async set(e,t){return sessionStorage[e]=JSON.stringify(t),t}async unset(e){return e in sessionStorage&&(delete sessionStorage[e],!0)}}},4352:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={expired:"Session expired! Please re-launch the app",noScopeForId:"Trying to get the ID of the selected %s. Please add 'launch' or 'launch/%s' to the requested scopes and try again.",noIfNoAuth:"You are trying to get %s but the app is not authorized yet.",noFreeContext:"Please don't use open fhir servers if you need to access launch context items like the %S."}},2334:function(e,t,r){"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof r.g&&r.g,e.exports=function(){"use strict";var e="3.7.7",t=e,r="function"===typeof Buffer,n="function"===typeof TextDecoder?new TextDecoder:void 0,o="function"===typeof TextEncoder?new TextEncoder:void 0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=Array.prototype.slice.call(i),a=function(e){var t={};return e.forEach((function(e,r){return t[e]=r})),t}(s),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,u=String.fromCharCode.bind(String),l="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){return new Uint8Array(Array.prototype.slice.call(e,0))},f=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"}))},p=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},h=function(e){for(var t,r,n,o,i="",a=e.length%3,c=0;c<e.length;){if((r=e.charCodeAt(c++))>255||(n=e.charCodeAt(c++))>255||(o=e.charCodeAt(c++))>255)throw new TypeError("invalid character found");i+=s[(t=r<<16|n<<8|o)>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}return a?i.slice(0,a-3)+"===".substring(a):i},d="function"===typeof btoa?function(e){return btoa(e)}:r?function(e){return Buffer.from(e,"binary").toString("base64")}:h,y=r?function(e){return Buffer.from(e).toString("base64")}:function(e){for(var t=4096,r=[],n=0,o=e.length;n<o;n+=t)r.push(u.apply(null,e.subarray(n,n+t)));return d(r.join(""))},g=function(e,t){return void 0===t&&(t=!1),t?f(y(e)):y(e)},b=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?u(192|t>>>6)+u(128|63&t):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|63&t)},m=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,v=function(e){return e.replace(m,b)},w=r?function(e){return Buffer.from(e,"utf8").toString("base64")}:o?function(e){return y(o.encode(e))}:function(e){return d(v(e))},A=function(e,t){return void 0===t&&(t=!1),t?f(w(e)):w(e)},S=function(e){return A(e,!0)},C=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,E=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return u(55296+(t>>>10))+u(56320+(1023&t));case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},O=function(e){return e.replace(C,E)},k=function(e){if(e=e.replace(/\s+/g,""),!c.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));for(var t,r,n,o="",i=0;i<e.length;)t=a[e.charAt(i++)]<<18|a[e.charAt(i++)]<<12|(r=a[e.charAt(i++)])<<6|(n=a[e.charAt(i++)]),o+=64===r?u(t>>16&255):64===n?u(t>>16&255,t>>8&255):u(t>>16&255,t>>8&255,255&t);return o},P="function"===typeof atob?function(e){return atob(p(e))}:r?function(e){return Buffer.from(e,"base64").toString("binary")}:k,_=r?function(e){return l(Buffer.from(e,"base64"))}:function(e){return l(P(e).split("").map((function(e){return e.charCodeAt(0)})))},R=function(e){return _(j(e))},x=r?function(e){return Buffer.from(e,"base64").toString("utf8")}:n?function(e){return n.decode(_(e))}:function(e){return O(P(e))},j=function(e){return p(e.replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})))},U=function(e){return x(j(e))},T=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},F=function(){var e=function(e,t){return Object.defineProperty(String.prototype,e,T(t))};e("fromBase64",(function(){return U(this)})),e("toBase64",(function(e){return A(this,e)})),e("toBase64URI",(function(){return A(this,!0)})),e("toBase64URL",(function(){return A(this,!0)})),e("toUint8Array",(function(){return R(this)}))},I=function(){var e=function(e,t){return Object.defineProperty(Uint8Array.prototype,e,T(t))};e("toBase64",(function(e){return g(this,e)})),e("toBase64URI",(function(){return g(this,!0)})),e("toBase64URL",(function(){return g(this,!0)}))},M=function(){F(),I()},K={version:e,VERSION:t,atob:P,atobPolyfill:k,btoa:d,btoaPolyfill:h,fromBase64:U,toBase64:A,encode:A,encodeURI:S,encodeURL:S,utob:v,btou:O,decode:U,isValid:function(e){if("string"!==typeof e)return!1;var t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:g,toUint8Array:R,extendString:F,extendUint8Array:I,extendBuiltins:M,Base64:{}};return Object.keys(K).forEach((function(e){return K.Base64[e]=K[e]})),K}()},7340:e=>{var t=1e3,r=60*t,n=60*r,o=24*n,i=7*o,s=365.25*o;function a(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,c){c=c||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&isFinite(e))return c.long?function(e){var i=Math.abs(e);if(i>=o)return a(e,i,o,"day");if(i>=n)return a(e,i,n,"hour");if(i>=r)return a(e,i,r,"minute");if(i>=t)return a(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=o)return Math.round(e/o)+"d";if(i>=n)return Math.round(e/n)+"h";if(i>=r)return Math.round(e/r)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1239:(e,t,r)=>{"use strict";var n=r(4706),o=r(5464),i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not a function")}},6579:(e,t,r)=>{"use strict";var n=r(8682),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i("Can't set "+o(e)+" as a prototype")}},1608:(e,t,r)=>{"use strict";var n=r(6821),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not an object")}},8938:e=>{"use strict";e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},9265:(e,t,r)=>{"use strict";var n,o,i,s=r(8938),a=r(9519),c=r(8986),u=r(4706),l=r(6821),f=r(6164),p=r(7972),h=r(5464),d=r(9266),y=r(5551),g=r(3131),b=r(6864),m=r(2972),v=r(464),w=r(1971),A=r(7899),S=r(2428),C=S.enforce,E=S.get,O=c.Int8Array,k=O&&O.prototype,P=c.Uint8ClampedArray,_=P&&P.prototype,R=O&&m(O),x=k&&m(k),j=Object.prototype,U=c.TypeError,T=w("toStringTag"),F=A("TYPED_ARRAY_TAG"),I="TypedArrayConstructor",M=s&&!!v&&"Opera"!==p(c.opera),K=!1,B={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},D=function(e){var t=m(e);if(l(t)){var r=E(t);return r&&f(r,I)?r[I]:D(t)}},q=function(e){if(!l(e))return!1;var t=p(e);return f(B,t)||f(L,t)};for(n in B)(i=(o=c[n])&&o.prototype)?C(i)[I]=o:M=!1;for(n in L)(i=(o=c[n])&&o.prototype)&&(C(i)[I]=o);if((!M||!u(R)||R===Function.prototype)&&(R=function(){throw new U("Incorrect invocation")},M))for(n in B)c[n]&&v(c[n],R);if((!M||!x||x===j)&&(x=R.prototype,M))for(n in B)c[n]&&v(c[n].prototype,x);if(M&&m(_)!==x&&v(_,x),a&&!f(x,T))for(n in K=!0,g(x,T,{configurable:!0,get:function(){return l(this)?this[F]:void 0}}),B)c[n]&&d(c[n],F,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:K&&F,aTypedArray:function(e){if(q(e))return e;throw new U("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!v||b(R,e)))return e;throw new U(h(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(a){if(r)for(var o in B){var i=c[o];if(i&&f(i.prototype,e))try{delete i.prototype[e]}catch(s){try{i.prototype[e]=t}catch(u){}}}x[e]&&!r||y(x,e,r?t:M&&k[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,o;if(a){if(v){if(r)for(n in B)if((o=c[n])&&f(o,e))try{delete o[e]}catch(i){}if(R[e]&&!r)return;try{return y(R,e,r?t:M&&R[e]||t)}catch(i){}}for(n in B)!(o=c[n])||o[e]&&!r||y(o,e,t)}},getTypedArrayConstructor:D,isView:function(e){if(!l(e))return!1;var t=p(e);return"DataView"===t||f(B,t)||f(L,t)},isTypedArray:q,TypedArray:R,TypedArrayPrototype:x}},5687:(e,t,r)=>{"use strict";var n=r(7707),o=n({}.toString),i=n("".slice);e.exports=function(e){return i(o(e),8,-1)}},7972:(e,t,r)=>{"use strict";var n=r(1415),o=r(4706),i=r(5687),s=r(1971)("toStringTag"),a=Object,c="Arguments"===i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(r){}}(t=a(e),s))?r:c?i(t):"Object"===(n=i(t))&&o(t.callee)?"Arguments":n}},814:(e,t,r)=>{"use strict";var n=r(8084);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},9266:(e,t,r)=>{"use strict";var n=r(9519),o=r(1191),i=r(6369);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},6369:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},3131:(e,t,r)=>{"use strict";var n=r(4416),o=r(1191);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),o.f(e,t,r)}},5551:(e,t,r)=>{"use strict";var n=r(4706),o=r(1191),i=r(4416),s=r(3036);e.exports=function(e,t,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(n(r)&&i(r,u,a),a.global)c?e[t]=r:s(t,r);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(l){}c?e[t]=r:o.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},3036:(e,t,r)=>{"use strict";var n=r(8986),o=Object.defineProperty;e.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},9519:(e,t,r)=>{"use strict";var n=r(8084);e.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2760:(e,t,r)=>{"use strict";var n=r(8986),o=r(6821),i=n.document,s=o(i)&&o(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},8971:e=>{"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},5083:(e,t,r)=>{"use strict";var n,o,i=r(8986),s=r(8971),a=i.process,c=i.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(o=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=+n[1]),e.exports=o},8084:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},5897:(e,t,r)=>{"use strict";var n=r(8084);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},4850:(e,t,r)=>{"use strict";var n=r(5897),o=Function.prototype.call;e.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},2345:(e,t,r)=>{"use strict";var n=r(9519),o=r(6164),i=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=o(i,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&s(i,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},119:(e,t,r)=>{"use strict";var n=r(7707),o=r(1239);e.exports=function(e,t,r){try{return n(o(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(i){}}},7707:(e,t,r)=>{"use strict";var n=r(5897),o=Function.prototype,i=o.call,s=n&&o.bind.bind(i,i);e.exports=n?s:function(e){return function(){return i.apply(e,arguments)}}},3542:(e,t,r)=>{"use strict";var n=r(8986),o=r(4706);e.exports=function(e,t){return arguments.length<2?(r=n[e],o(r)?r:void 0):n[e]&&n[e][t];var r}},7151:(e,t,r)=>{"use strict";var n=r(1239),o=r(3192);e.exports=function(e,t){var r=e[t];return o(r)?void 0:n(r)}},8986:function(e,t,r){"use strict";var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},6164:(e,t,r)=>{"use strict";var n=r(7707),o=r(2522),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},3114:e=>{"use strict";e.exports={}},9704:(e,t,r)=>{"use strict";var n=r(9519),o=r(8084),i=r(2760);e.exports=!n&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},5167:(e,t,r)=>{"use strict";var n=r(7707),o=r(4706),i=r(5704),s=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),e.exports=i.inspectSource},2428:(e,t,r)=>{"use strict";var n,o,i,s=r(9279),a=r(8986),c=r(6821),u=r(9266),l=r(6164),f=r(5704),p=r(4658),h=r(3114),d="Object already initialized",y=a.TypeError,g=a.WeakMap;if(s||f.state){var b=f.state||(f.state=new g);b.get=b.get,b.has=b.has,b.set=b.set,n=function(e,t){if(b.has(e))throw new y(d);return t.facade=e,b.set(e,t),t},o=function(e){return b.get(e)||{}},i=function(e){return b.has(e)}}else{var m=p("state");h[m]=!0,n=function(e,t){if(l(e,m))throw new y(d);return t.facade=e,u(e,m,t),t},o=function(e){return l(e,m)?e[m]:{}},i=function(e){return l(e,m)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=o(t)).type!==e)throw new y("Incompatible receiver, "+e+" required");return r}}}},4706:e=>{"use strict";var t="object"==typeof document&&document.all;e.exports="undefined"==typeof t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},3192:e=>{"use strict";e.exports=function(e){return null===e||void 0===e}},6821:(e,t,r)=>{"use strict";var n=r(4706);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},8682:(e,t,r)=>{"use strict";var n=r(6821);e.exports=function(e){return n(e)||null===e}},7592:e=>{"use strict";e.exports=!1},7970:(e,t,r)=>{"use strict";var n=r(3542),o=r(4706),i=r(6864),s=r(4111),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&i(t.prototype,a(e))}},1591:(e,t,r)=>{"use strict";var n=r(8249);e.exports=function(e){return n(e.length)}},4416:(e,t,r)=>{"use strict";var n=r(7707),o=r(8084),i=r(4706),s=r(6164),a=r(9519),c=r(2345).CONFIGURABLE,u=r(5167),l=r(2428),f=l.enforce,p=l.get,h=String,d=Object.defineProperty,y=n("".slice),g=n("".replace),b=n([].join),m=a&&!o((function(){return 8!==d((function(){}),"length",{value:8}).length})),v=String(String).split("String"),w=e.exports=function(e,t,r){"Symbol("===y(h(t),0,7)&&(t="["+g(h(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?d(e,"name",{value:t,configurable:!0}):e.name=t),m&&r&&s(r,"arity")&&e.length!==r.arity&&d(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?a&&d(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var n=f(e);return s(n,"source")||(n.source=b(v,"string"==typeof t?t:"")),e};Function.prototype.toString=w((function(){return i(this)&&p(this).source||u(this)}),"toString")},9344:e=>{"use strict";var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},1191:(e,t,r)=>{"use strict";var n=r(9519),o=r(9704),i=r(253),s=r(1608),a=r(3326),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f="enumerable",p="configurable",h="writable";t.f=n?i?function(e,t,r){if(s(e),t=a(t),s(r),"function"===typeof e&&"prototype"===t&&"value"in r&&h in r&&!r[h]){var n=l(e,t);n&&n[h]&&(e[t]=r.value,r={configurable:p in r?r[p]:n[p],enumerable:f in r?r[f]:n[f],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(s(e),t=a(t),s(r),o)try{return u(e,t,r)}catch(n){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},2972:(e,t,r)=>{"use strict";var n=r(6164),o=r(4706),i=r(2522),s=r(4658),a=r(814),c=s("IE_PROTO"),u=Object,l=u.prototype;e.exports=a?u.getPrototypeOf:function(e){var t=i(e);if(n(t,c))return t[c];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},6864:(e,t,r)=>{"use strict";var n=r(7707);e.exports=n({}.isPrototypeOf)},464:(e,t,r)=>{"use strict";var n=r(119),o=r(6821),i=r(327),s=r(6579);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(a){}return function(r,n){return i(r),s(n),o(r)?(t?e(r,n):r.__proto__=n,r):r}}():void 0)},2509:(e,t,r)=>{"use strict";var n=r(4850),o=r(4706),i=r(6821),s=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&o(r=e.toString)&&!i(a=n(r,e)))return a;if(o(r=e.valueOf)&&!i(a=n(r,e)))return a;if("string"!==t&&o(r=e.toString)&&!i(a=n(r,e)))return a;throw new s("Can't convert object to primitive value")}},327:(e,t,r)=>{"use strict";var n=r(3192),o=TypeError;e.exports=function(e){if(n(e))throw new o("Can't call method on "+e);return e}},4658:(e,t,r)=>{"use strict";var n=r(816),o=r(7899),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},5704:(e,t,r)=>{"use strict";var n=r(7592),o=r(8986),i=r(3036),s="__core-js_shared__",a=e.exports=o[s]||i(s,{});(a.versions||(a.versions=[])).push({version:"3.37.1",mode:n?"pure":"global",copyright:"\xa9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"})},816:(e,t,r)=>{"use strict";var n=r(5704);e.exports=function(e,t){return n[e]||(n[e]=t||{})}},4030:(e,t,r)=>{"use strict";var n=r(5083),o=r(8084),i=r(8986).String;e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},466:(e,t,r)=>{"use strict";var n=r(9344);e.exports=function(e){var t=+e;return t!==t||0===t?0:n(t)}},8249:(e,t,r)=>{"use strict";var n=r(466),o=Math.min;e.exports=function(e){var t=n(e);return t>0?o(t,9007199254740991):0}},2522:(e,t,r)=>{"use strict";var n=r(327),o=Object;e.exports=function(e){return o(n(e))}},4766:(e,t,r)=>{"use strict";var n=r(3281),o=RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw new o("Wrong offset");return r}},3281:(e,t,r)=>{"use strict";var n=r(466),o=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw new o("The argument can't be less than 0");return t}},9140:(e,t,r)=>{"use strict";var n=r(4850),o=r(6821),i=r(7970),s=r(7151),a=r(2509),c=r(1971),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var r,c=s(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!o(r)||i(r))return r;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},3326:(e,t,r)=>{"use strict";var n=r(9140),o=r(7970);e.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},1415:(e,t,r)=>{"use strict";var n={};n[r(1971)("toStringTag")]="z",e.exports="[object z]"===String(n)},5464:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(r){return"Object"}}},7899:(e,t,r)=>{"use strict";var n=r(7707),o=0,i=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++o+i,36)}},4111:(e,t,r)=>{"use strict";var n=r(4030);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},253:(e,t,r)=>{"use strict";var n=r(9519),o=r(8084);e.exports=n&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},9279:(e,t,r)=>{"use strict";var n=r(8986),o=r(4706),i=n.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},1971:(e,t,r)=>{"use strict";var n=r(8986),o=r(816),i=r(6164),s=r(7899),a=r(4030),c=r(4111),u=n.Symbol,l=o("wks"),f=c?u.for||u:u&&u.withoutSetter||s;e.exports=function(e){return i(l,e)||(l[e]=a&&i(u,e)?u[e]:f("Symbol."+e)),l[e]}},7360:(e,t,r)=>{"use strict";var n=r(8986),o=r(4850),i=r(9265),s=r(1591),a=r(4766),c=r(2522),u=r(8084),l=n.RangeError,f=n.Int8Array,p=f&&f.prototype,h=p&&p.set,d=i.aTypedArray,y=i.exportTypedArrayMethod,g=!u((function(){var e=new Uint8ClampedArray(2);return o(h,e,{length:1,0:3},1),3!==e[1]})),b=g&&i.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var e=new f(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));y("set",(function(e){d(this);var t=a(arguments.length>1?arguments[1]:void 0,1),r=c(e);if(g)return o(h,this,r,t);var n=this.length,i=s(r),u=0;if(i+t>n)throw new l("Wrong length");for(;u<i;)this[t+u]=r[u++]}),!g||b)},1252:(e,t,r)=>{"use strict";var n,o;r.d(t,{A:()=>i}),n="undefined"!==typeof self?self:void 0,o=function(e){if("function"!==typeof Promise)throw"Promise support required";var t=e.crypto||e.msCrypto;if(t){var r=t.subtle||t.webkitSubtle;if(r){var n=e.Crypto||t.constructor||Object,o=e.SubtleCrypto||r.constructor||Object,i=(e.CryptoKey||e.Key,e.navigator.userAgent.indexOf("Edge/")>-1),s=!!e.msCrypto&&!i,a=!t.subtle&&!!t.webkitSubtle;if(s||a){var c={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},u={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach((function(e){var n=r[e];r[e]=function(o,i,c){var u,l,v,C,E=[].slice.call(arguments);switch(e){case"generateKey":u=y(o),l=i,v=c;break;case"importKey":u=y(c),l=E[3],v=E[4],"jwk"===o&&((i=b(i)).alg||(i.alg=g(u)),i.key_ops||(i.key_ops="oct"!==i.kty?"d"in i?v.filter(S):v.filter(A):v.slice()),E[1]=function(e){var t=b(e);return s&&(t.extractable=t.ext,delete t.ext),h(unescape(encodeURIComponent(JSON.stringify(t)))).buffer}(i));break;case"unwrapKey":u=E[4],l=E[5],v=E[6],E[2]=c._key}if("generateKey"===e&&"HMAC"===u.name&&u.hash)return u.length=u.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[u.hash.name],r.importKey("raw",t.getRandomValues(new Uint8Array(u.length+7>>3)),u,l,v);if(a&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===u.name&&(!u.modulusLength||u.modulusLength>=2048))return(o=y(o)).name="RSAES-PKCS1-v1_5",delete o.hash,r.generateKey(o,!0,["encrypt","decrypt"]).then((function(e){return Promise.all([r.exportKey("jwk",e.publicKey),r.exportKey("jwk",e.privateKey)])})).then((function(e){return e[0].alg=e[1].alg=g(u),e[0].key_ops=v.filter(A),e[1].key_ops=v.filter(S),Promise.all([r.importKey("jwk",e[0],u,!0,e[0].key_ops),r.importKey("jwk",e[1],u,l,e[1].key_ops)])})).then((function(e){return{publicKey:e[0],privateKey:e[1]}}));if((a||s&&"SHA-1"===(u.hash||{}).name)&&"importKey"===e&&"jwk"===o&&"HMAC"===u.name&&"oct"===i.kty)return r.importKey("raw",h(p(i.k)),c,E[3],E[4]);if(a&&"importKey"===e&&("spki"===o||"pkcs8"===o))return r.importKey("jwk",function(e){var t=m(e),r=!1;t.length>2&&(r=!0,t.shift());var n={ext:!0};if("1.2.840.113549.1.1.1"!==t[0][0])throw new TypeError("Unsupported key type");var o=["n","e","d","p","q","dp","dq","qi"],i=m(t[1]);r&&i.shift();for(var s=0;s<i.length;s++)i[s][0]||(i[s]=i[s].subarray(1)),n[o[s]]=f(d(i[s]));return n.kty="RSA",n}(i),c,E[3],E[4]);if(s&&"unwrapKey"===e)return r.decrypt(E[3],c,i).then((function(e){return r.importKey(o,e,E[4],E[5],E[6])}));try{C=n.apply(r,E)}catch(O){return Promise.reject(O)}return s&&(C=new Promise((function(e,t){C.onabort=C.onerror=function(e){t(e)},C.oncomplete=function(t){e(t.target.result)}}))),C=C.then((function(e){return"HMAC"===u.name&&(u.length||(u.length=8*e.algorithm.length)),0==u.name.search("RSA")&&(u.modulusLength||(u.modulusLength=(e.publicKey||e).algorithm.modulusLength),u.publicExponent||(u.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e=e.publicKey&&e.privateKey?{publicKey:new w(e.publicKey,u,l,v.filter(A)),privateKey:new w(e.privateKey,u,l,v.filter(S))}:new w(e,u,l,v)}))}})),["exportKey","wrapKey"].forEach((function(e){var t=r[e];r[e]=function(n,o,i){var c,u=[].slice.call(arguments);switch(e){case"exportKey":u[1]=o._key;break;case"wrapKey":u[1]=o._key,u[2]=i._key}if((a||s&&"SHA-1"===(o.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===n&&"HMAC"===o.algorithm.name&&(u[0]="raw"),!a||"exportKey"!==e||"spki"!==n&&"pkcs8"!==n||(u[0]="jwk"),s&&"wrapKey"===e)return r.exportKey(n,o).then((function(e){return"jwk"===n&&(e=h(unescape(encodeURIComponent(JSON.stringify(b(e)))))),r.encrypt(u[3],i,e)}));try{c=t.apply(r,u)}catch(l){return Promise.reject(l)}return s&&(c=new Promise((function(e,t){c.onabort=c.onerror=function(e){t(e)},c.oncomplete=function(t){e(t.target.result)}}))),"exportKey"===e&&"jwk"===n&&(c=c.then((function(e){return(a||s&&"SHA-1"===(o.algorithm.hash||{}).name)&&"HMAC"===o.algorithm.name?{kty:"oct",alg:g(o.algorithm),key_ops:o.usages.slice(),ext:!0,k:f(d(e))}:((e=b(e)).alg||(e.alg=g(o.algorithm)),e.key_ops||(e.key_ops="public"===o.type?o.usages.filter(A):"private"===o.type?o.usages.filter(S):o.usages.slice()),e)}))),!a||"exportKey"!==e||"spki"!==n&&"pkcs8"!==n||(c=c.then((function(e){return e=function(e){var t,r=[["",null]],n=!1;if("RSA"!==e.kty)throw new TypeError("Unsupported key type");for(var o=["n","e","d","p","q","dp","dq","qi"],i=[],s=0;s<o.length&&o[s]in e;s++){var a=i[s]=h(p(e[o[s]]));128&a[0]&&(i[s]=new Uint8Array(a.length+1),i[s].set(a,1))}return i.length>2&&(n=!0,i.unshift(new Uint8Array([0]))),r[0][0]="1.2.840.113549.1.1.1",t=i,r.push(new Uint8Array(v(t)).buffer),n?r.unshift(new Uint8Array([0])):r[1]={tag:3,value:r[1]},new Uint8Array(v(r)).buffer}(b(e)),e}))),c}})),["encrypt","decrypt","sign","verify"].forEach((function(e){var t=r[e];r[e]=function(n,o,i,a){if(s&&(!i.byteLength||a&&!a.byteLength))throw new Error("Empy input is not allowed");var c,u=[].slice.call(arguments),l=y(n);if(s&&"decrypt"===e&&"AES-GCM"===l.name){var f=n.tagLength>>3;u[2]=(i.buffer||i).slice(0,i.byteLength-f),n.tag=(i.buffer||i).slice(i.byteLength-f)}u[1]=o._key;try{c=t.apply(r,u)}catch(p){return Promise.reject(p)}return s&&(c=new Promise((function(t,r){c.onabort=c.onerror=function(e){r(e)},c.oncomplete=function(r){if(r=r.target.result,"encrypt"===e&&r instanceof AesGcmEncryptResult){var n=r.ciphertext,o=r.tag;(r=new Uint8Array(n.byteLength+o.byteLength)).set(new Uint8Array(n),0),r.set(new Uint8Array(o),n.byteLength),r=r.buffer}t(r)}}))),c}})),s){var l=r.digest;r.digest=function(e,t){if(!t.byteLength)throw new Error("Empy input is not allowed");var n;try{n=l.call(r,e,t)}catch(o){return Promise.reject(o)}return n=new Promise((function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}}))},e.crypto=Object.create(t,{getRandomValues:{value:function(e){return t.getRandomValues(e)}},subtle:{value:r}}),e.CryptoKey=w}a&&(t.subtle=r,e.Crypto=n,e.SubtleCrypto=o,e.CryptoKey=w)}}}function f(e){return btoa(e).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function p(e){return e=(e+="===").slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function h(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function d(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function y(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=y(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=y(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function g(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function b(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(d(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach((function(r){r in e&&(t[r]=e[r])}));break;default:throw new TypeError("Unsupported key type")}return t}function m(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),t.end-t.pos<2||t.end>e.length)throw new RangeError("Malformed DER");var r,n=e[t.pos++],o=e[t.pos++];if(o>=128){if(o&=127,t.end-t.pos<o)throw new RangeError("Malformed DER");for(var i=0;o--;)i<<=8,i|=e[t.pos++];o=i}if(t.end-t.pos<o)throw new RangeError("Malformed DER");switch(n){case 2:r=e.subarray(t.pos,t.pos+=o);break;case 3:if(e[t.pos++])throw new Error("Unsupported bit string");o--;case 4:r=new Uint8Array(e.subarray(t.pos,t.pos+=o)).buffer;break;case 5:r=null;break;case 6:var s=btoa(d(e.subarray(t.pos,t.pos+=o)));if(!(s in c))throw new Error("Unsupported OBJECT ID "+s);r=c[s];break;case 48:r=[];for(var a=t.pos+o;t.pos<a;)r.push(m(e,t));break;default:throw new Error("Unsupported DER tag 0x"+n.toString(16))}return r}function v(e,t){t||(t=[]);var r=0,n=0,o=t.length+2;if(t.push(0,0),e instanceof Uint8Array){r=2,n=e.length;for(var i=0;i<n;i++)t.push(e[i])}else if(e instanceof ArrayBuffer)for(r=4,n=e.byteLength,e=new Uint8Array(e),i=0;i<n;i++)t.push(e[i]);else if(null===e)r=5,n=0;else if("string"===typeof e&&e in u){var s=h(atob(u[e]));for(r=6,n=s.length,i=0;i<n;i++)t.push(s[i])}else if(e instanceof Array){for(i=0;i<e.length;i++)v(e[i],t);r=48,n=t.length-o}else{if(!("object"===typeof e&&3===e.tag&&e.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+e);for(r=3,n=(e=new Uint8Array(e.value)).byteLength,t.push(0),i=0;i<n;i++)t.push(e[i]);n++}if(n>=128){var a=n;for(n=4,t.splice(o,0,a>>24&255,a>>16&255,a>>8&255,255&a);n>1&&!(a>>24);)a<<=8,n--;n<4&&t.splice(o,4-n),n|=128}return t.splice(o-2,2,r,n),t}function w(e,t,r,n){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===r?e.extractable:r,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===n?e.usages:n,enumerable:!0}})}function A(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function S(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}},"function"===typeof define&&define.amd?define([],(function(){return o(n)})):"object"===typeof module&&module.exports?module.exports=o(n):o(n);const i=window.crypto}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(9297).oauth2.authorize({clientId:"9e43034e-949f-41f5-880e-eb31a7663bee",scope:"launch/patient openid fhirUser patient/*.read Questionnaire.read Questionnaire.search QuestionnaireResponse.read QuestionnaireResponse.create QuestionnaireResponse.search Patient.read Patient.search Patient.create",redirectUri:"http://localhost:3000/callback",iss:"https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4/"})})()})();
//# sourceMappingURL=main.3db51219.js.map